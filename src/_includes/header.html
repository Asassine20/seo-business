<!-- ============================================ -->
<!--                 Navigation                   -->
<!-- ============================================ -->
{% set navPages = collections.all | eleventyNavigation %}

<div id="navigation">
    <div aria-hidden="true" class="background-color-div">
        <!--This div is used to overcome a z-index issue where the open
            #navbar-menu is on top of the #navigation. This bar places itself 
            the #navbar-menu so that menu appears behind the #navigation
        -->
    </div>
    <div class="container">
        <!--Logo - Get SVGs if you can.  I use fiverr to get png's turned into SVGs. Highly recommend it, worth the $20 - get a light and dark version-->
        <a class="logo" aria-label="click to go to home page" href="/">
            <picture id="logo-picture">
                <!-- Image for large screens before scroll -->
                <source 
                    srcset="https://utfs.io/f/ZfzyDSYoDact4JG63VEkjeZkqsJwlUMh0FdPBSAzR1YbO3Hn" 
                    media="(min-width: 1024px)">
                <!-- Default fallback -->
                <img 
                    id="logo-image" 
                    aria-hidden="true" 
                    src="https://utfs.io/f/ZfzyDSYoDactnWqV5smlcCBkFpKZI69M0TaYbVrHOehd4fGW" 
                    decoding="async" 
                    loading="lazy" 
                    alt="logo" 
                    width="500px" 
                    height="200px">
            </picture>
        </a>

        <!--Mobile Nav toggle-->
        <button class="hamburger-menu" aria-expanded="false" aria-controls="navbar-menu">
            <span aria-hidden="true"></span>
        </button>

<!-- Main Nav -->
<nav id="navbar-menu" aria-label="main navigation">
    <ul>
        <li>
            <a href="/clients">Clients</a>
        </li>
        <li style="position: relative;">
            <a href="/solutions" id="solutions-link">Solutions</a>
            <ul id="solutions-dropdown" style="display: none; position: absolute; top: 100%; left: 0; background-color: white; border: 1px solid #ccc; padding: 10px; list-style: none; min-width: 150px; text-align: left; white-space: nowrap; z-index: 1000;">
                <li><a href="/seo" style="color: black; text-decoration: none; display: block;">SEO</a></li>
                <li><a href="/ppc" style="color: black; text-decoration: none; display: block;">PPC (Google Ads)</a></li>
                <li><a href="/website-design" style="color: black; text-decoration: none; display: block;">Website Design</a></li>
                <li><a href="/content-creation" style="color: black; text-decoration: none; display: block;">Content Creation</a></li>
                <li><a href="/mobile-app-development" style="color: black; text-decoration: none; display: block;">Mobile App Development</a></li>
                <li><a href="/custom-software" style="color: black; text-decoration: none; display: block;">Custom Software</a></li>
            </ul>
        </li>
        <li>
            <a href="/reviews">Reviews</a>
        </li>
        <li>
            <a href="/about">About Us</a>
        </li>
        <li>
            <a href="/contact">Contact</a>
        </li>
    </ul>
</nav>

    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const solutionsLink = document.getElementById('solutions-link');
        const dropdownMenu = document.getElementById('solutions-dropdown');

        function isMobile() {
            return window.innerWidth <= 1023; // Updated breakpoint for mobile behavior
        }

        function resetDropdown() {
            dropdownMenu.style.display = 'none';
        }

        function setupMenu() {
            resetDropdown();

            if (isMobile()) {
                // Remove hover event listeners for mobile
                solutionsLink.parentElement.removeEventListener('mouseenter', showDropdown);
                solutionsLink.parentElement.removeEventListener('mouseleave', hideDropdown);

                // Add click event for mobile
                solutionsLink.addEventListener('click', toggleDropdown);
            } else {
                // Remove click event for desktop
                solutionsLink.removeEventListener('click', toggleDropdown);

                // Add hover event listeners for desktop
                solutionsLink.parentElement.addEventListener('mouseenter', showDropdown);
                solutionsLink.parentElement.addEventListener('mouseleave', hideDropdown);
            }
        }

        function showDropdown() {
            dropdownMenu.style.display = 'block';
        }

        function hideDropdown() {
            dropdownMenu.style.display = 'none';
        }

        function toggleDropdown(event) {
            event.preventDefault(); // Prevent default link behavior
            dropdownMenu.style.display = (dropdownMenu.style.display === 'block') ? 'none' : 'block';
        }

        // Initial setup
        setupMenu();

        // Re-apply menu logic on window resize
        window.addEventListener('resize', setupMenu);

        // Close dropdown if clicking outside of it (for mobile)
        document.addEventListener('click', function(event) {
            if (isMobile() && !solutionsLink.contains(event.target) && !dropdownMenu.contains(event.target)) {
                resetDropdown();
            }
        });
    });
</script>



<style>
    /* Responsive styling for mobile screens */
    @media (max-width: 1023px) {
        #navbar-menu li {
            text-align: center;
        }
        #navbar-menu li ul {
            left: 50% !important; /* Force centering on mobile */
            transform: translateX(-50%) !important; /* Force centering on mobile */
            width: auto; /* Allow dropdown to take up as much space as needed */
            background-color: black !important; /* Black background for mobile */
            border: 1px solid #444; /* Darker border for mobile */
            z-index: 1000;
        }
        #navbar-menu li ul a {
            color: white !important; /* White text for mobile */
        }

    }

    #solutions-dropdown {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: white;
        border: 1px solid #ccc;
        padding: 10px;
        list-style: none;
        min-width: 150px;
        text-align: left;
        white-space: nowrap;
        z-index: 21001 !important;
        border-radius: 8px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 1024px) { 
            #solutions-dropdown li {
                margin: 10px 0; /* Adjust the vertical spacing */
            }
        }
        
</style>